<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

let alphabet = 'abcdefghijklmnopqrstuvwxyz';
let outputString = []

example1 = ['attack at dawn!', 'alphonse'] //AEIHQX SX DLLU!
example2 = ['Example of sequence: 1, 2, 3, 4.', 'lilkey'] //'PFLWTJP WQ CIOFMYMI: 1, 2, 3, 4.'
example3 = ['cryptography', 'verylongkeyword'] //'XVPNECTXKTFU'
example4 = ['Same length key', 'Samelengthkey'] //'KAYI WIAMMO UIW'


exampled1 = ['UWJJW XAGWLNFM VNNNDXHVWWL :)', 'js'] //LEARN FRONTEND DEVELOPMENT :)
exampled2 = ['ICWWQAM KECEIK JVZZT EADGG!', 'rollingscopes'] //ROLLING SCOPES SHOOL RULES!

let test = function encrypt(message, key) {
        if(message === undefined || key === undefined) {
            throw error
        }
        let offset = 0;
        [...message.toLowerCase()].map((m, indexMsg) => {
            if(alphabet.indexOf(m) >= 0) {
                
                let idxCharOfMsg = alphabet.indexOf(m) + 1
                let charOfKey = indexMsg - offset < key.length ? key[indexMsg - offset] : key[(indexMsg - offset) % key.length]
                charOfKey = charOfKey.toLowerCase()
                let idxCharOfKey = alphabet.indexOf(charOfKey) + 1
                let step = idxCharOfMsg + (idxCharOfKey - 1)
                step = step > alphabet.length ? (step % alphabet.length) == 0 ? 26 : step % alphabet.length  : step 
                outputString.push(alphabet[step - 1])

            } else {
                outputString.push(m)
                offset++
            }
        })

        //console.log(outputString.join("").toUpperCase())
        return outputString.join("").toUpperCase()
}

let testD = function decrypt(message, key) {
        if(message === undefined || key === undefined) {
            throw error
        }
        let offset = 0;
        [...message.toLowerCase()].map((m, indexMsg) => {
            if(alphabet.indexOf(m) >= 0) {
                
                let idxCharOfMsg = alphabet.indexOf(m) + 1
                let charOfKey = indexMsg - offset < key.length ? key[indexMsg - offset] : key[(indexMsg - offset) % key.length]
                charOfKey = charOfKey.toLowerCase()
                let idxCharOfKey = alphabet.indexOf(charOfKey) + 1
                let step = idxCharOfMsg - idxCharOfKey < 0 ? alphabet.length - Math.abs(idxCharOfMsg - idxCharOfKey) : idxCharOfMsg - idxCharOfKey
                step = step > alphabet.length ? (step % alphabet.length) == 0 ? alphabet.length : step % alphabet.length  : step 
                outputString.push(alphabet[step])

            } else {
                outputString.push(m)
                offset++
            }
        })

        console.log(outputString.join("").toUpperCase())
        return outputString.join("").toUpperCase()
}



    </script>
</body>
</html>